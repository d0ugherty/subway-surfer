
{% extends 'base.html' %}
{% block title %} {{ station }} {% endblock %}
{% load static %}
{% block extra_head %}
    <link rel="stylesheet" href="{% static 'subway_surfer/styles/info_board/info_board.css' %}">
    <link rel="stylesheet" href="{% static 'subway_surfer/styles/info_board/table_row.css' %}">
{% endblock %}

{% block content %}

<h3 id = "station_name">Train Information for {{ station }}</h3>

    {% include "time.html" %}

    {% include "info_board/select.html" %}

<!-- TO DO:  Make this dynamic instead of hard-coding "all" -->
    <div id="top-container" class="flex-container">
        <table id="tbl_all_arrivals">

                {% include 'info_board/header.html' with show_all_arrivals=True %}

            <tbody hx-post="/update_arrivals_table/tbl_all_arrivals/" 
                hx-trigger="every 5s" 
                hx-swap="innerHTML" 
                hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=all_arrivals_ctx show_all_arrivals=True %}
            </tbody>

        </table>
    
    </div>


<div id="info_by_route" class="flex-container">
        {% for template in route_templates %}
            {% with template_name=template.template_name id_arrivals_ctx=template.id_arrivals_ctx %}
                {% include template_name with station=station arrivals=id_arrivals_ctx %}
            {% endwith %}
        {% endfor %}
</div>
{% endblock %}