
{% load static %}
{% block extra_head %}

    <script src="https://unpkg.com/htmx.org"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--<script src="{% static 'subway_surfer/js/update_table.js' %}"></script>-->
    <script src="{% static 'subway_surfer/js/update_time.js' %}"></script>
    
{% endblock %}
<div id="time">
    <script type="text/javascript">
        update_time();
    </script>
    <h3 id="current-time">{{current_time}}</h3>
</div>
<h1 id = "station">Train Information for {{ station }}</h1>

    <table id="tbl_all_arrivals">
            {% include 'info_board/header.html' with all_arrivals=True %}
        <tbody hx-post="/update_arrivals_table/tbl_all_arrivals/" 
            hx-trigger="every 5s" 
            hx-swap="innerHTML" 
            hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                {% include 'info_board/table_rows.html' with arrivals=all_arrivals_ctx all_arrivals=True %}
        </tbody>
    </table>

    {% include "info_board/select.html" %}

<div id="info_by_route">

    
        {% if air_arrivals_ctx %}
            <h2>AIRPORT</h>
            <table id="tbl_air_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_air_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_air_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=air_arrivals_ctx  %}
                </tbody>
            </table>
        {% endif %}
    
        {% if che_arrivals_ctx %}
            <h2>CHESTNUT HILL EAST</h>
            <table id="tbl_che_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_che_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_che_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                        {% include 'info_board/table_rows.html' with arrivals=che_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>

    <div>
        {% if chw_arrivals_ctx %}
            <h2>CHESTNUT HILL WEST</h>
            <table id="tbl_chw_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_chw_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_chw_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                        {% include 'info_board/table_rows.html' with arrivals=chw_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>

    <div>
        {% if lan_arrivals_ctx %}
            <h2>
                LANSDALE
            </h>
            <table id="tbl_lan_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_lan_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_lan_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                        {% include 'info_board/table_rows.html' with arrivals=lan_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    <div>
        {% if med_arrivals_ctx %}
            <h2>
                MEDIA
            </h>
            <table id="tbl_med_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_med_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_med_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=med_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    
    <div>
        {% if fox_arrivals_ctx %}
            <h2>
                FOX CHASE
            </h>
            <table id="tbl_fox_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_fox_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_fox_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=fox_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    
    <div>
        {% if nor_arrivals_ctx %}
            <h2>
                NORRISTOWN
            </h>
            <table id="tbl_nor_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_nor_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_nor_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=nor_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </DIV>
    
    <div>
        {% if pao_arrivals_ctx %}
            <h2>
                PAOLI/THORNDALE
            </h>
            <table id="tbl_pao_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_pao_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_pao_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=pao_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    
    <div>
        {% if cyn_arrivals_ctx %}
        <h2>
            CYNWYD
        </h>
        <table id="tbl_cyn_arrivals">
            {% include 'info_board/header.html' %}
            <tbody id = "tbl_cyn_arrivals_body" 
                hx-post="/update_arrivals_table/tbl_cyn_arrivals/"
                hx-trigger="every 5s" 
                hx-swap="innerHTML" 
                hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                {% include 'info_board/table_rows.html' with arrivals=cyn_arrivals_ctx %}
            </tbody>
        </table>
        {% endif %}
    </div>
    
    <div>
        {% if tre_arrivals_ctx %}
            <h2>
                TRENTON
            </h>
            <table id="tbl_tre_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_tre_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_tre_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=tre_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    
    <div>
        {% if war_arrivals_ctx %}
            <h2>
                WARMINSTER
            </h>
            <table id="tbl_war_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_war_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_war_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=war_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    
    <div>
        {% if wil_arrivals_ctx %}
            <h2>
                NEWARK/WILMINGTON
            </h>
            <table id="tbl_wil_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_wil_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_wil_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=wil_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
    
    <div>
        {% if wtr_arrivals_ctx %}
            <h2>
                WEST TRENTON
            </h>
            <table id="tbl_wtr_arrivals">
                {% include 'info_board/header.html' %}
                <tbody id = "tbl_wtr_arrivals_body" 
                    hx-post="/update_arrivals_table/tbl_wtr_arrivals/" 
                    hx-trigger="every 5s" 
                    hx-swap="innerHTML" 
                    hx-vals='{"station": "{{ station }}", "csrfmiddlewaretoken": "{{ csrf_token }}"}'>
                    {% include 'info_board/table_rows.html' with arrivals=wtr_arrivals_ctx %}
                </tbody>
            </table>
        {% endif %}
    </div>
</div>
